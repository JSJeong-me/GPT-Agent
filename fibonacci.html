<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>피보나치 수열 계산기</title>
    <style>
      :root {
        color-scheme: light dark;
        font-family: "Pretendard", "Noto Sans KR", -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
      }

      body {
        margin: 0;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: radial-gradient(circle at top, #f7f8fc, #dfe4ea);
        color: #222;
      }

      .card {
        width: min(680px, 90vw);
        background: rgba(255, 255, 255, 0.9);
        border-radius: 24px;
        padding: 32px 40px;
        box-shadow: 0 24px 48px rgba(31, 41, 55, 0.1);
        backdrop-filter: blur(6px);
      }

      h1 {
        margin-top: 0;
        font-size: clamp(1.8rem, 3vw + 1rem, 2.6rem);
        letter-spacing: -0.03em;
      }

      p.description {
        margin-top: 8px;
        margin-bottom: 32px;
        color: #445;
        line-height: 1.6;
      }

      form {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
        align-items: flex-end;
      }

      label {
        display: flex;
        flex-direction: column;
        gap: 8px;
        font-weight: 600;
      }

      input[type="number"] {
        font: inherit;
        padding: 12px 16px;
        border-radius: 12px;
        border: 1px solid #cbd5f5;
        min-width: 220px;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }

      input[type="number"]:focus {
        outline: none;
        border-color: #4c6ef5;
        box-shadow: 0 0 0 4px rgba(76, 110, 245, 0.2);
      }

      button {
        font: inherit;
        font-weight: 700;
        padding: 12px 24px;
        border-radius: 999px;
        border: none;
        background: linear-gradient(135deg, #4c6ef5, #15aabf);
        color: white;
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.15s ease;
      }

      button:hover {
        transform: translateY(-1px);
        box-shadow: 0 12px 24px rgba(76, 110, 245, 0.25);
      }

      button:active {
        transform: translateY(1px);
        box-shadow: none;
      }

      .result {
        margin-top: 32px;
        background: #f4f6fb;
        border-radius: 18px;
        padding: 24px;
        line-height: 1.7;
        color: #1d3557;
        white-space: pre-line;
        word-break: break-word;
      }

      .result.hidden {
        display: none;
      }

      .error {
        color: #c92a2a;
        margin-top: 12px;
        font-weight: 600;
      }

      @media (max-width: 520px) {
        .card {
          padding: 28px 24px;
          border-radius: 20px;
        }

        form {
          flex-direction: column;
          align-items: stretch;
        }

        button {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <main class="card">
      <h1>피보나치 수열 계산기</h1>
      <p class="description">
        원하는 항의 개수를 입력하면 피보나치 수열과 마지막 항의 값을 계산해 드립니다.
        0부터 시작하며, 각 항은 바로 앞의 두 항을 더해 얻을 수 있습니다.
      </p>
      <form id="fibonacci-form" aria-describedby="helper-text">
        <label>
          계산할 항의 개수
          <input
            id="terms"
            type="number"
            min="1"
            max="200"
            value="10"
            required
            inputmode="numeric"
            aria-describedby="helper-text"
          />
        </label>
        <button type="submit">계산하기</button>
      </form>
      <p id="helper-text">
        💡 1 이상의 숫자를 입력하면 처음부터 해당 개수만큼의 피보나치 수를 보여 드립니다.
      </p>
      <p id="error" class="error" role="alert" aria-live="assertive"></p>
      <section id="result" class="result hidden" aria-live="polite"></section>
    </main>

    <script>
      const form = document.getElementById("fibonacci-form");
      const termsInput = document.getElementById("terms");
      const errorBox = document.getElementById("error");
      const resultBox = document.getElementById("result");

      const MAX_TERMS = 200;

      function fibonacciSequence(count) {
        if (count <= 0) {
          return [];
        }

        const sequence = [];

        for (let i = 0; i < count; i += 1) {
          if (i === 0) {
            sequence.push(0n);
          } else if (i === 1) {
            sequence.push(1n);
          } else {
            sequence.push(sequence[i - 1] + sequence[i - 2]);
          }
        }

        return sequence;
      }

      function renderResult(sequence) {
        if (sequence.length === 0) {
          resultBox.textContent = "표시할 수열이 없습니다.";
          return;
        }

        const formattedSequence = sequence
          .map((value, index) => `${index + 1}번째 항: ${value.toString()}`)
          .join("\n");

        const lastValue = sequence[sequence.length - 1];

        resultBox.textContent = `${formattedSequence}\n\n마지막 항(${sequence.length}번째)는 ${lastValue.toString()} 입니다.`;
      }

      form.addEventListener("submit", (event) => {
        event.preventDefault();

        const count = Number.parseInt(termsInput.value, 10);

        if (Number.isNaN(count)) {
          errorBox.textContent = "숫자를 입력해 주세요.";
          resultBox.classList.add("hidden");
          return;
        }

        if (count < 1) {
          errorBox.textContent = "1 이상의 정수를 입력해 주세요.";
          resultBox.classList.add("hidden");
          return;
        }

        if (count > MAX_TERMS) {
          errorBox.textContent = `최대 ${MAX_TERMS}항까지만 계산할 수 있습니다.`;
          resultBox.classList.add("hidden");
          return;
        }

        errorBox.textContent = "";

        const sequence = fibonacciSequence(count);
        renderResult(sequence);
        resultBox.classList.remove("hidden");
      });
    </script>
  </body>
</html>
